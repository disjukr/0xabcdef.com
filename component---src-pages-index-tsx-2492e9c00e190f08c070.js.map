{"version":3,"sources":["webpack:///./src/components/MarbleBackground.tsx","webpack:///./src/pages/index.tsx","webpack:///./src/pages/index.module.scss"],"names":["MarbleBackground","_ref","className","canvas","useRef","_useSubscribe","useSubscribe","layoutContext","layoutState","emitter","width","height","useAnimationFrameLoop","useEffect","PIXI","require","container","Container","circles","cameraMatrix","Matrix","translate","rt1","RenderTexture","create","offset","rt2","rts1","Sprite","x","y","rts2","df","filters","DisplacementFilter","cf","ColorTransformFilter","addChild","a","renderer","autoDetectRenderer","view","current","on","resize","pow","Math","random","s","max","Circle","gen","_iterator","children","_isArray","Array","isArray","_i","Symbol","iterator","_ref2","length","next","done","value","move","scale","cos","sin","render","removeAllListeners","arr0","react_default","createElement","ref","dx","dy","size","color","_this","_PIXI$Graphics","call","this","blendMode","BLEND_MODES","ADD","beginFill","drawCircle","endFill","stageWidth","stageHeight","removeChild","spd","angle","PI","Graphics","redMultiplier","greenMultiplier","blueMultiplier","alphaMultiplier","redOffset","greenOffset","blueOffset","alphaOffset","_this2","_PIXI$filters$ColorMa","matrix","ColorMatrixFilter","__webpack_exports__","styles","classNames","href","module","exports","page","layer","background"],"mappings":"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","file":"component---src-pages-index-tsx-2492e9c00e190f08c070.js","sourcesContent":["import React, { useEffect, useRef } from 'react';\nimport { ContextValue } from 'join-react-context';\n\nimport { arr0, useSubscribe, useAnimationFrameLoop } from '../util';\nimport { layoutContext } from './Layout';\n\ninterface Props {\n    className?: string;\n}\nexport default ({ className }: Props) => {\n    const canvas = useRef(null as any);\n    const [layoutState, emitter] = useSubscribe(layoutContext);\n    const width = layoutState.width / 2;\n    const height = layoutState.height / 2;\n    useAnimationFrameLoop(emitter);\n    useEffect(() => {\n        const PIXI = require('pixi.js');\n        let width = layoutState.width / 2;\n        let height = layoutState.height / 2;\n        const container = new PIXI.Container();\n        const circles = new PIXI.Container();\n        const offset = 50;\n        const cameraMatrix = new PIXI.Matrix();\n        cameraMatrix.translate(offset, offset);\n        const rt1 = PIXI.RenderTexture.create(width + offset * 2, height + offset * 2);\n        const rt2 = PIXI.RenderTexture.create(width + offset * 2, height + offset * 2);\n        const rts1 = new PIXI.Sprite(rt1);\n        rts1.x = -offset;\n        rts1.y = -offset;\n        const rts2 = new PIXI.Sprite(rt2);\n        rts2.x = -offset;\n        rts2.y = -offset;\n        const df = new PIXI.filters.DisplacementFilter(rts2);\n        const f = 0.9;\n        const cf = new ColorTransformFilter(f, f, f);\n        rts1.filters = [df, cf];\n        container.addChild(circles, rts1);\n        let a = 0;\n        const renderer = PIXI.autoDetectRenderer(width, height, {\n            view: canvas.current,\n        });\n        emitter.on('update', (layoutState: ContextValue<typeof layoutContext>) => {\n            width = layoutState.width / 2;\n            height = layoutState.height / 2;\n            rt1.resize(width + offset * 2, height + offset * 2);\n            rt2.resize(width + offset * 2, height + offset * 2);\n            renderer.resize(width, height);\n        });\n        emitter.on('animation-frame', () => {\n            const pow = Math.random();\n            const s = Math.max(width, height) / 4;\n            a += (Math.random() * 4 - 2) * pow;\n            circles.addChild(Circle.gen(width, height, pow));\n            circles.addChild(Circle.gen(width, height, pow));\n            for (const circle of circles.children) {\n                (circle as Circle).move(circles, width, height);\n            }\n            df.scale.x = Math.cos(a) * pow * s;\n            df.scale.y = Math.sin(a) * pow * s;\n            renderer.render(rts1, rt1, false, cameraMatrix);\n            renderer.render(circles, rt1, false);\n            renderer.render(container, rt2, false, cameraMatrix);\n            renderer.render(container);\n        });\n        return () => emitter.removeAllListeners();\n    }, arr0);\n    return <canvas className={className} ref={canvas} width={width} height={height} />;\n};\n\nclass Circle extends PIXI.Graphics {\n    constructor(\n        public x: number,\n        public y: number,\n        public dx: number,\n        public dy: number,\n        public size: number,\n        public color: number\n    ) {\n        super();\n        this.blendMode = PIXI.BLEND_MODES.ADD;\n        if (size > 0) {\n            this.beginFill(color);\n            this.drawCircle(0, 0, size);\n            this.endFill();\n        }\n    }\n    move(container: PIXI.Container, stageWidth: number, stageHeight: number) {\n        this.x += this.dx;\n        this.y += this.dy;\n        if (\n            this.x < -this.size ||\n            this.x > stageWidth + this.size ||\n            this.y < -this.size ||\n            this.y > stageHeight + this.size\n        ) {\n            container.removeChild(this);\n        }\n    }\n    static gen(stageWidth: number, stageHeight: number, pow: number) {\n        const size = pow * (Math.max(stageWidth, stageHeight) / 5);\n        const spd = size * 0.1 + 5;\n        const angle = Math.random() * Math.PI * 2;\n        return new Circle(\n            stageWidth / 2,\n            stageHeight / 2,\n            Math.cos(angle) * spd,\n            Math.sin(angle) * spd,\n            size,\n            (Math.random() * 0xffffff) & 0x333333\n        );\n    }\n}\n\nclass ColorTransformFilter extends PIXI.filters.ColorMatrixFilter {\n    constructor(\n        redMultiplier = 1,\n        greenMultiplier = 1,\n        blueMultiplier = 1,\n        alphaMultiplier = 1,\n        redOffset = 0,\n        greenOffset = 0,\n        blueOffset = 0,\n        alphaOffset = 0\n    ) {\n        super();\n        this.matrix = [\n            redMultiplier,\n            0,\n            0,\n            0,\n            redOffset / 255,\n            0,\n            greenMultiplier,\n            0,\n            0,\n            greenOffset / 255,\n            0,\n            0,\n            blueMultiplier,\n            0,\n            blueOffset / 255,\n            0,\n            0,\n            0,\n            alphaMultiplier,\n            alphaOffset / 255,\n        ];\n    }\n}\n","import React from 'react';\nimport classNames from 'classnames';\n\nimport MarbleBackground from '../components/MarbleBackground';\nimport * as styles from './index.module.scss';\n\nexport default () => {\n    return (\n        <div className={styles.page}>\n            <MarbleBackground className={classNames(styles.background, styles.layer)} />\n            <div className={styles.layer}>\n                <h1>JongChan Choi</h1>\n                <ul>\n                    <li>\n                        <a href=\"https://0xabcdef.com/resume/\">resume</a>\n                    </li>\n                    <li>\n                        <a href=\"https://github.com/disjukr\">github</a>\n                    </li>\n                    <li>\n                        <a href=\"https://twitter.com/disjukr\">twitter</a>\n                    </li>\n                </ul>\n            </div>\n        </div>\n    );\n};\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"page\":\"index-module--page--2nb-E\",\"layer\":\"index-module--layer--12eg-\",\"background\":\"index-module--background--1Lh-R\"};"],"sourceRoot":""}