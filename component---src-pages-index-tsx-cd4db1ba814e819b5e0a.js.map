{"version":3,"sources":["webpack:///./src/components/MarbleBackground.tsx","webpack:///./src/pages/index.tsx","webpack:///./src/pages/index.module.scss"],"names":["MarbleBackground","_ref","className","canvas","useRef","_useSubscribe","useSubscribe","layoutContext","layoutState","emitter","width","height","useAnimationFrameLoop","useEffect","container","PIXI","circles","cameraMatrix","translate","rt1","create","offset","rt2","rts1","x","y","rts2","df","DisplacementFilter","cf","ColorTransformFilter","filters","addChild","a","renderer","view","current","on","resize","pow","Math","random","s","max","Circle","gen","_iterator","children","_isArray","Array","isArray","_i","Symbol","iterator","_ref2","length","next","done","value","move","scale","cos","sin","render","removeAllListeners","arr0","react_default","createElement","ref","dx","dy","size","color","_this","_PIXI$Graphics","call","this","blendMode","ADD","beginFill","drawCircle","endFill","stageWidth","stageHeight","removeChild","spd","angle","PI","redMultiplier","greenMultiplier","blueMultiplier","alphaMultiplier","redOffset","greenOffset","blueOffset","alphaOffset","_this2","_PIXI$filters$ColorMa","matrix","ColorMatrixFilter","__webpack_exports__","styles","classNames","href","module","exports","page","layer","background"],"mappings":"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","file":"component---src-pages-index-tsx-cd4db1ba814e819b5e0a.js","sourcesContent":["import React, { useEffect, useRef } from 'react';\nimport { ContextValue } from 'join-react-context';\nimport * as PIXI from 'pixi.js';\n\nimport { arr0, useSubscribe, useAnimationFrameLoop } from '../util';\nimport { layoutContext } from './Layout';\n\ninterface Props {\n    className?: string;\n}\nexport default ({ className }: Props) => {\n    const canvas = useRef(null as any);\n    const [layoutState, emitter] = useSubscribe(layoutContext);\n    const width = layoutState.width / 2;\n    const height = layoutState.height / 2;\n    useAnimationFrameLoop(emitter);\n    useEffect(() => {\n        let width = layoutState.width / 2;\n        let height = layoutState.height / 2;\n        const container = new PIXI.Container();\n        const circles = new PIXI.Container();\n        const offset = 50;\n        const cameraMatrix = new PIXI.Matrix();\n        cameraMatrix.translate(offset, offset);\n        const rt1 = PIXI.RenderTexture.create(width + offset * 2, height + offset * 2);\n        const rt2 = PIXI.RenderTexture.create(width + offset * 2, height + offset * 2);\n        const rts1 = new PIXI.Sprite(rt1);\n        rts1.x = -offset;\n        rts1.y = -offset;\n        const rts2 = new PIXI.Sprite(rt2);\n        rts2.x = -offset;\n        rts2.y = -offset;\n        const df = new PIXI.filters.DisplacementFilter(rts2);\n        const f = 0.9;\n        const cf = new ColorTransformFilter(f, f, f);\n        rts1.filters = [df, cf];\n        container.addChild(circles, rts1);\n        let a = 0;\n        const renderer = PIXI.autoDetectRenderer(width, height, {\n            view: canvas.current,\n        });\n        emitter.on('update', (layoutState: ContextValue<typeof layoutContext>) => {\n            width = layoutState.width / 2;\n            height = layoutState.height / 2;\n            rt1.resize(width + offset * 2, height + offset * 2);\n            rt2.resize(width + offset * 2, height + offset * 2);\n            renderer.resize(width, height);\n        });\n        emitter.on('animation-frame', () => {\n            const pow = Math.random();\n            const s = Math.max(width, height) / 4;\n            a += (Math.random() * 4 - 2) * pow;\n            circles.addChild(Circle.gen(width, height, pow));\n            circles.addChild(Circle.gen(width, height, pow));\n            for (const circle of circles.children) {\n                (circle as Circle).move(circles, width, height);\n            }\n            df.scale.x = Math.cos(a) * pow * s;\n            df.scale.y = Math.sin(a) * pow * s;\n            renderer.render(rts1, rt1, false, cameraMatrix);\n            renderer.render(circles, rt1, false);\n            renderer.render(container, rt2, false, cameraMatrix);\n            renderer.render(container);\n        });\n        return () => emitter.removeAllListeners();\n    }, arr0);\n    return <canvas className={className} ref={canvas} width={width} height={height} />;\n};\n\nclass Circle extends PIXI.Graphics {\n    constructor(\n        public x: number,\n        public y: number,\n        public dx: number,\n        public dy: number,\n        public size: number,\n        public color: number\n    ) {\n        super();\n        this.blendMode = PIXI.BLEND_MODES.ADD;\n        if (size > 0) {\n            this.beginFill(color);\n            this.drawCircle(0, 0, size);\n            this.endFill();\n        }\n    }\n    move(container: PIXI.Container, stageWidth: number, stageHeight: number) {\n        this.x += this.dx;\n        this.y += this.dy;\n        if (\n            this.x < -this.size ||\n            this.x > stageWidth + this.size ||\n            this.y < -this.size ||\n            this.y > stageHeight + this.size\n        ) {\n            container.removeChild(this);\n        }\n    }\n    static gen(stageWidth: number, stageHeight: number, pow: number) {\n        const size = pow * (Math.max(stageWidth, stageHeight) / 5);\n        const spd = size * 0.1 + 5;\n        const angle = Math.random() * Math.PI * 2;\n        return new Circle(\n            stageWidth / 2,\n            stageHeight / 2,\n            Math.cos(angle) * spd,\n            Math.sin(angle) * spd,\n            size,\n            (Math.random() * 0xffffff) & 0x333333\n        );\n    }\n}\n\nclass ColorTransformFilter extends PIXI.filters.ColorMatrixFilter {\n    constructor(\n        redMultiplier = 1,\n        greenMultiplier = 1,\n        blueMultiplier = 1,\n        alphaMultiplier = 1,\n        redOffset = 0,\n        greenOffset = 0,\n        blueOffset = 0,\n        alphaOffset = 0\n    ) {\n        super();\n        this.matrix = [\n            redMultiplier,\n            0,\n            0,\n            0,\n            redOffset / 255,\n            0,\n            greenMultiplier,\n            0,\n            0,\n            greenOffset / 255,\n            0,\n            0,\n            blueMultiplier,\n            0,\n            blueOffset / 255,\n            0,\n            0,\n            0,\n            alphaMultiplier,\n            alphaOffset / 255,\n        ];\n    }\n}\n","import React from 'react';\nimport classNames from 'classnames';\n\nimport MarbleBackground from '../components/MarbleBackground';\nimport * as styles from './index.module.scss';\n\nexport default () => {\n    return (\n        <div className={styles.page}>\n            <MarbleBackground className={classNames(styles.background, styles.layer)} />\n            <div className={styles.layer}>\n                <h1>JongChan Choi</h1>\n                <ul>\n                    <li>\n                        <a href=\"https://0xabcdef.com/resume/\">resume</a>\n                    </li>\n                    <li>\n                        <a href=\"https://github.com/disjukr\">github</a>\n                    </li>\n                    <li>\n                        <a href=\"https://twitter.com/disjukr\">twitter</a>\n                    </li>\n                </ul>\n            </div>\n        </div>\n    );\n};\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"page\":\"index-module--page--2nb-E\",\"layer\":\"index-module--layer--12eg-\",\"background\":\"index-module--background--1Lh-R\"};"],"sourceRoot":""}